<section class="page__container h-100 mb-4" id="user">
  <!-- outer offcanvas wrapper -->
  <div class="oj-offcanvas-outer-wrapper" style="border: 1px solid #d1e6f9; height:100%;">
    <!-- start offcanvas -->
    <div id="sidebar" class="oj-offcanvas-start oj-panel oj-panel-alt5 oj-offcanvas-overlay-shadow h-100" style="position: fixed; overflow-y : scroll; width: 200px; height: 100%;">
      <h5 class="my-4 text-light logo text-center">
        <i class="oj-navigationlist-item-icon fa  fa-bandcamp" data-bind="click: toggleDrawer">
          <span style="color: black;"> HNG BOARD </span>
        </i>
      </h5>
      <oj-navigation-list selection="{{ selectedItem }}">
        <ul>
          <li id="Dashboard">
            <a for="overview-intern">
              <i class="oj-navigationlist-item-icon fa fa-dashboard"></i> DASHBOARD
            </a>
          </li>
          <li id="Posts">
            <a for="posts-intern">
              <i class="oj-navigationlist-item-icon fa fa-newspaper-o"></i> POSTS
            </a>
          </li>
          <li id="Tasks">
            <a for="tasks-intern">
              <i class="oj-navigationlist-item-icon fa fa-list"></i> TASKS
            </a>
          </li>
          <li id="Settings">
            <a for="intern-settings">
              <i class="oj-navigationlist-item-icon fa fa-cog"></i> SETTINGS
            </a>
          </li>
        </ul>
      </oj-navigation-list>
    </div>
    <div id="maincontent" style="height: 100%">
      <div id="maincontent_nav" class="w-100 position-relative pb-3 pt-4">
        <nav class="d-flex justify-content-between">
          <h4 class="d-flex">
            <i class="fa fa-bars mr-2 " data-bind="click: toggleDrawer"></i>
            <span data-bind="text: selectedItem"></span>
          </h4>
          <span class="d-flex ml-5">
            <a for="notifications-admin" id="notifi">
              <h4 class="position-relative" style="top:1px; right: 8px; cursor: pointer"><i class=" fa fa-bell-o" data-bind="click: toggleNotify"></i>
                <span style="font-size: small; position: absolute; top: -8px; right: -8px;" class="badge badge-danger"
                      data-bind="text: notificationCount"></span>
              </h4>
            </a>
            <img data-bind="attr: { src: profile_img, alt: 'Profile img', height: '40', width: '40' }" class="rounded-circle mx-3 mt-n2 profile_img">
            <!--            <h4 class="position-relative mx-4 d-lg-none d-md-none" data-bind="click: searchbar_sm" style="top:2px"><i class="fa fa-search "></i></h4>-->
            <!--            <form id="form1" class="mx-3 oj-sm-only-hide">
                          <input id="inputSearch" placeholder="Search..." data-bind="ojComponent: {
                                      component: 'ojInputSearch',
                                      value: keyword,
                                      options: tags,
                                      rootAttributes: {style:'max-width: 20em'}}" />
                        </form>-->
            <div id="dialogWrapper">
              <oj-dialog id="logoutModal" dialog-title="Logout" class=" position-absolute col-3 col-md-3 mt-5 p-0" modality="modal" position.at.vertical="top">
                <div slot="body">
                  <h6>Sure to exit?</h6>
                  <button data-bind="click: logout" class="btn btn-danger float-right">
                    Confirm
                  </button>
                </div>
              </oj-dialog>
              <button class="btn btn-sm btn-danger" data-bind="click: open">
                <i class="fa fa-sign-out"></i>
              </button>

            </div>
          </span>
        </nav>
        <oj-bind-if test="[[sb_sm()]]">
          <form id="form1" class="position-relative d-lg-none d-md-none d-sm-flex justify-content-end" style="top: 4px">
            <input placeholder="Search..." data-bind="ojComponent: {
                            component: 'ojInputSearch',
                            value: keyword,
                            options: tags,
                            rootAttributes: {style:'max-width: 20em'}}" />
          </form>
        </oj-bind-if>
      </div>
      <div class="clearfix"></div>
      <div id="maincontent_intern_body" class="px-3 w-100">
        <oj-bind-if test="[[!isNotify()]]">
        <div id="overview-intern" class="mt-2">
          <header class="d-flex" style=" color: #768093; display: block;">
            <div class="w-100">
              <h4 class="py-1 text-capitalize"><span data-bind="text: fullname"></span></h4>
              <p class="badge badge-info p-2" data-bind="text: tracksArray"></p><br/>

            </div>
            <div class="w-100 text-right">
              <div id="currentStepText">
                <small class="h5">Stage</small> <span class="h2" data-bind="text:  selectedStepLabel()"></span>
              </div>
            </div>
          </header>
          <oj-bind-if test="[[onProbation()]]">
            <div class="oj-panel oj-panel-shadow-sm mr-5 w-100 rounded bg-danger text-white p-2">
              You are on Probation! You were probated by <span data-bind="text: probated_by"></span> for the following reason: <span data-bind="text: probation_reason"></span>.<br/><br/>
              If you are not taken out of probabtion on/before <span data-bind="text: deadline"></span>, you will be deactivated from the internship.
            </div>
          </oj-bind-if>
          <div class="d-flex justify-content-end">
             <div class="mb-5">
            <button class="btn btn-success" data-bind="click: popModal">Change Track</button>
          </div>
          <!-- <div class="mb-5 ml-3">
            <button class="btn btn-warning" data-bind="click: revealModal">Submit Task</button>
          </div> -->
          </div>

          <oj-train id="train" class="oj-train-stretch col-sm-10 col-12 p-sm-0 p-0 mx-sm-auto my-3"
                    on-selected-step-changed="[[updateLabelText]]" selected-step="{{selectedStepValue}}" steps="[[stepArray]]">
          </oj-train>

          <h5 class="text-center mt-5 title" data-bind="text:  'HNGi7 Guidebook '"></h5> <hr>

          <div class="m-3 guidebook">
              <!-- <oj-bind-text value="[[guidebook]]"></oj-bind-text> -->
          After registration on both slack and HNGi board, ensure to read instructions thoroughly at least 3 times to avoid you been removed from channels due to negligence.
          These instructions are as follows:
              <ol>
                <li>If anything is unclear, start a thread(starting a thread is slack's term for replying a message. Just like how you reply under a tweet or comment under an Instagram post). </li>
                <li>You can also send a message in the #help group, someone will attend to you. </li>
                <li>Private messages are allowed too. Anyone with "Rep" appended to their names or :star: icon (Mentor) will be very willing to help. </li>
                <li>To start a thread, kindly long press a message and click on "Start a Thread". Just so to keep everything organised. Thanks guys. I know you're all awesome enough to act accordingly  :blush: :upside_down_face:Love always :heart: </li>
                <li>I suggest you take out time to read all the messages in #announcement, it's not that much. That's where all important messages are and where future important messages will be sent to. </li>
                <li>You can join any WhatsApp group if you want however it is not necessary and is not affiliated with start.ng. </li>
                <li>Go to #help for help </li>
                <li>#random to random talk, anything at all </li>
                <li>#general is for mentors..do not post there only reply to posts as a thread </li>
                <li>#class is for classes and Q&A session..do not also post here only reply to posts as a thread </li>
                <li>#stage1 is for information on the first stage of the internship. do not also post here only reply to posts as a thread </li>
                <li>#introduction is to introduce yourself and meet people </li>
                <li>#game is for games and quizzes. </li>
              </ol>
          </div>

          <h5 class="text-center mt-5 title" data-bind="text:  'Latest Posts '"></h5> <hr>
          

          <div class="oj-flex oj-sm-justify-content-center">
            <div class="col-sm-12 col-md-11">
              <br/>
              <b>These are the latest posts. They are not clickable, please click the hamburger icon on the top left of this page to view posts and more details</b>
              <br/>
                <oj-list-view id="Taskmodel-task-list" class="mx-auto overflow-hidden bg-light p-0" data="[[dataProvider]]">
                    <template slot="itemTemplate" data-oj-as="item" class="border-0">
    <div class="p-2 border rounded bg-light" style="width: 100%; color: #4e5769 !important">
    <div>
    <p class="font-weight-bold ml-2 mb-2 text-capitalize">
    <oj-bind-text value="[[item.data.post_title]]"></oj-bind-text></p>
    </div>
    <i class="oj-fwk-icon oj-fwk-icon-calendar mr-2 mt-2 pl-2 pb-2"></i>
    <span class="mb-0 mt-2 pb-2" data-bind="text: 'Posted: ' + item.data.deadline"></span>
    </div>
    </template>
                </oj-list-view>
                <oj-paging-control id="paging" data="[[dataProvider]]" page-size="5" slot="bottom">
                </oj-paging-control>
            </div>
        </div>
        </div>


        <div id="posts-intern">
          <div data-bind="ojModule: 'intern_post'" class="my-4"></div>
        </div>
        <!-- <div id="tasks-intern">
            <div data-bind="ojModule: 'tasks'" class="my-4"></div>
        </div> -->

        <div id="tasks-intern">
          <div data-bind="ojModule: 'intern_tasks'" class="my-4"></div>
        </div>

        <div class="oj-flex-item" id="intern-settings">
          <!-- <div data-bind="ojModule: 'intern/profile'"></div> -->
          <div data-bind="ojModule: 'profile'"></div>
        </div>
        </oj-bind-if>
        <oj-bind-if test="[[isNotify()]]">
          <h3>Notifications</h3>
          <div style="display: block;">
            <span
              class="btn btn-success m-4 pull-left"
              data-bind="click: dashboard"
              ><i class="fa fa-arrow-left mr-2"></i>Go Back</span
            >
          </div>
          <div data-bind="ojModule: 'notifications'" style="display: block !important;"></div>
        </oj-bind-if>
      </div>
    </div>

    <!-- Start Messages Component -->

    <oj-messages id="application-messages" messages="{{applicationMessages}}" display="notification" position='{
                 "my": {"vertical" : "bottom", "horizontal": "end"},
                 "at": {"vertical": "bottom", "horizontal": "end"},
                 "of": "window"
                 }'>
    </oj-messages>

    <!-- End Messages Component -->
  </div>
</section>

<oj-dialog id="requestDialog" style="display:none" title="Make a track change request">
  <div slot="body">
    <div class="form-group">
      <oj-label class="oj-label oj-label-inline">Track</oj-label>
      <select
          data-bind="options: track, optionsText: 'track_name',  optionsValue:'id', optionsCaption: 'Select a track', value: tracks_id,"
          class="form-control">
      </select>
    </div>
    <div class='oj-flex-item mt-3'>
      <!-- You need to set the labelled-by attribute
to make this accessible. -->
      <oj-radioset id="inlineSet" labelled-by="inlineLabelId" value="{{chosenAction}}" class="oj-choice-direction-row">
        <oj-option id="rock" value="add">Add</oj-option>
        <oj-option id="sb" value="remove">Remove</oj-option>
      </oj-radioset>
    </div>
    <oj-label class="oj-label oj-label-inline" for="createNewDesc">Reason for Change</oj-label>
    <input id="createNewDesc" class="form-control" data-bind="textInput: newTrack.reason">
  </div>
  <div slot="footer">
    <oj-button id="submitBtn" on-oj-action="[[submitRequest]]">Submit</oj-button>
  </div>
</oj-dialog>

<!-- Task Submission Modal -->

<oj-dialog id="submitDialog" style="display:none" title="Make a task submission">
  <div slot="body">
    <div class="form-group">
       <div class="form-group">
      <oj-label class="oj-label oj-label-inline">Tasks</oj-label>
      <select
          data-bind="options: task, optionsText: 'title',  optionsValue:'id', optionsCaption: 'Select a task', value: task_id,"
          required
          class="form-control">
      </select>
    </div>
      <oj-label class="oj-label oj-label-inline" for="submitTask">Submit a valid URL</oj-label>
      <input
      id="submitTask"
      type="url"
      required
          class="form-control" data-bind="textInput: taskURL().url">
      </input>
      <oj-label class="oj-label oj-label-inline" for="submitTask">Leave a comment</oj-label>
      <textarea
      id="submitTask"
      required
          class="form-control" data-bind="textInput: comment">
      </textarea>
    </div>

  </div>
  <div slot="footer">
    <oj-button id="submitBtn" on-oj-action="[[submitTask]]">Submit</oj-button>
  </div>
</oj-dialog>
